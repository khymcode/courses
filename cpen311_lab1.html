
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CPEN 311 – Lab 1: Tone Organ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="navbar">
        <a href="index.html">Home</a>
        <a href="cpen311.html">CPEN 311</a>
        <a href="elec291.html">ELEC 291</a>
    </div>

    <div class="content">
        <h1>Lab 1: Tone Organ on the DE1-SoC</h1>
        <p><strong>Course:</strong> CPEN 311 – Digital Logic and Design<br>
        <strong>Date:</strong> 2025-05-22</p>

        <h2>Overview</h2>
        <p>
        This lab focuses on building a one-octave tone organ using the DE1-SoC FPGA. The system maps switch inputs to musical notes, generating
        square waves routed to the board's audio hardware. Additionally, the lab incorporates an LCD emulation (via SignalTap) and LED animation.
        </p>

        <h2>Objectives</h2>
        <ul>
            <li>Implement a square-wave tone generator using a clock divider</li>
            <li>Use SW[3:1] to select between 8 tones (Do–Re–Mi–Fa–So–La–Si–Do2)</li>
            <li>Enable audio output using SW[0]</li>
            <li>Display signal information and switch states using SignalTap LCD emulation</li>
            <li>Animate LEDs in a back-and-forth pattern at 1Hz</li>
        </ul>

        <h2>Design</h2>
        <h3>Audio Signal Generation</h3>
        <p>
        A custom clock divider receives a 50 MHz clock and outputs a frequency selected by SW[3:1], generating tones mapped to notes in an octave.
        The output square wave is converted into signed 8-bit audio samples for the codec. 
        </p>
        <pre><code>always_ff @(posedge CLOCK_50) begin
    if (counter >= tone_period) begin
        counter <= 0;
        square_wave <= ~square_wave;
    end else begin
        counter <= counter + 1;
    end
end</code></pre>

        <h3>Switch Mapping</h3>
        <table>
            <tr><th>SW[3:1]</th><th>Note</th><th>Frequency (Hz)</th></tr>
            <tr><td>000</td><td>Do</td><td>523</td></tr>
            <tr><td>001</td><td>Re</td><td>587</td></tr>
            <tr><td>010</td><td>Mi</td><td>659</td></tr>
            <tr><td>011</td><td>Fa</td><td>698</td></tr>
            <tr><td>100</td><td>So</td><td>783</td></tr>
            <tr><td>101</td><td>La</td><td>880</td></tr>
            <tr><td>110</td><td>Si</td><td>987</td></tr>
            <tr><td>111</td><td>Do2</td><td>1046</td></tr>
        </table>

        <h3>SignalTap LCD Console</h3>
        <p>
        The LCD module displays both waveform information and switch states using SignalTap. Two modes are available:
        <ul>
            <li><strong>Scope Mode</strong> (SW[9] = 1): Displays live waveform</li>
            <li><strong>Info Console</strong> (SW[9] = 0): Shows switch status and DAC output</li>
        </ul>
        </p>

        <h3>LED Pattern</h3>
        <p>
        A 1 Hz clock divider updates LEDR[7:0] to create a "bouncing" effect. Timing control is achieved using key debounce and edge detection logic.
        </p>

        <h2>Results</h2>
        <ul>
            <li>Tones matched their expected frequency output via audio jack</li>
            <li>LCD (via SignalTap) correctly displayed signal names and switch states</li>
            <li>LEDs animated from left to right and back every 1 second</li>
        </ul>

        <h2>Conclusion</h2>
        <p>
        This lab introduced core FPGA design techniques, including custom clock division, real-time waveform generation, user interfacing, and SignalTap debugging. 
        The modular approach enabled waveform control, visual feedback, and audio output—all running concurrently.
        </p>

        <h2>Appendix</h2>
        <ul>
            <li>Full Verilog source available in repository</li>
            <li>SignalTap waveform captures (see /captures folder)</li>
            <li>Frequency formula worksheet: f = 50e6 / (2 * divisor)</li>
        </ul>
    </div>
</body>
</html>
